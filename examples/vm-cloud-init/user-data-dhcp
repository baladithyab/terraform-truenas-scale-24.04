#cloud-config
hostname: ubuntu-dhcp
manage_etc_hosts: true
chpasswd:
  expire: false
users:
  - name: ubuntu
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: users, admin
    home: /home/ubuntu
    shell: /bin/bash
    lock_passwd: false
    ssh_authorized_keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC3ExamplePublicKeyForDemostrationOnly
packages:
  - qemu-guest-agent
  - net-tools
  - curl
  - wget
runcmd:
  - systemctl enable --now qemu-guest-agent
  - echo "VM initialized with cloud-init (DHCP)" > /etc/cloud-init-done
write_files:
  - path: /etc/motd
    content: |
      Welcome to Ubuntu Server with DHCP Configuration
      This VM was configured using Terraform and cloud-init
      Network configuration: DHCP
      Check IP address with: ip addr show eth0
final_message: "Cloud-init completed successfully. System is ready for use."
